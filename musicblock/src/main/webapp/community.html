
<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">


<link rel="stylesheet"
	href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://code.jquery.com/jquery-2.2.2.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

<!--<link rel="stylesheet" href="/resources/demos/style.css">-->

<!--scroll-->
<meta name="viewport"
	content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">


<!-- 부트스트랩 CDN -->
<!-- 합쳐지고 최소화된 최신 CSS -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<!-- 부가적인 테마 -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
<!-- 합쳐지고 최소화된 최신 자바스크립트 -->

<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="css/community/sortable.css">

<!-- community CSS-->
<link rel="stylesheet" href="css/community/community.css">

<!-- 공통모듈 : 메뉴바 -->
<link rel="stylesheet" href="css/common/commonMenu.css">



<!-- <style>
.modal {
	top: 20px;
	padding: 50%;
}

.btn {
	padding: 6px 12px;
}

.modal-header {
	padding: 5px;
	height: 35px;
	border-bottom: 0.1px solid #e5e5e5;
}

.form-control {
	width: 90%;
	height: 25px;
	padding: 3px 12px;
	font-size: 12px;
}
</style> -->
<script src="javascript/community/community.js"></script>
<script>

<<<<<<< .mine
=======
$(function(){
	if(localUser==null){
		alert("로그인안되어 있구나? 로그인부터해주겠니? 여기 처리를 어떻게 할까 ㅎ?");
	}
});
>>>>>>> .r609


</script>
</head>

<body>
	<!--공통모듈 : 메뉴바-->
	<script src="javascript/common/commonMenu.js"></script>
	
	<div id="background" style="height: 88%">

		<input type="radio" class="tabs" style="display: none;" checked="checked">
		<label for="tab1"><i class="fa fa-user"> Blocks</i></label> <input
			type="radio" class="tabs" style="display: none;"> <label
			for="tab2"><i class="fa fa-download">Musics</i></label>

		<div id="blockSection" class="total-container">
			<div class="total-container">
				<div id="block-left" style="width: 50%; float: left;">
				</div>
				<div id="block-right" style="width: 50%; float: right;">
				</div>
			</div>
		</div>

		<div id="musicSection" class="total-container">
			<div id="music-left" style="width: 50%; float: left;"></div>
			<div id="music-right" style="width: 50%; float: right;"></div>
		</div>
</div>

	 <!-- User Defined -->
		  <script src="javascript/common/indexeddbshim.min.js"></script>
		  <script src="javascript/common/initializeIndexedDB.js"></script>
		   <script src="javascript/community/indexedDBForCommunity.js"></script>
<<<<<<< .mine
=======
	<script>
		/* 	$(function() {
		 $(window).scroll
		 (function(){
		 alert("scrollHeight:"+scrollHeight);
		 alert("documentHeight"+documentHeight);  
		 var scrollHeight = $(window).scrollTop() + $(window).height(); //윈도우는 딱 보이는 화면의 크기
		 var documentHeight = $(document).height(); //도큐먼트는 보이지 않는 곳도 포함한 크기(도큐먼트가 윈도우보다 더 사이즈가 큼) 
		
		 });
		 });  */
		 

		 	$(".people").click(function() {
				var Pindex = $(".people").index(this);
				alert(Pindex);
				console.log(Pindex);
				//$('h2:eq(1)').append("바보");
			}); 

		var test = 2;
		var max = 50;
		var test1 = 0;
		var max1 = 50; 
		$(function() {
			var intervalClearer = setInterval(function(){
				if(sequenceFlag == true){
					RecvFromServer();
					console.log("intervalClearer:"+intervalClearer);
					clearInterval(intervalClearer);
				}
			}, 10);
			function RecvFromServer() {
				//$(window).scroll(function() {
									var scrollHeight = parseInt($(window).scrollTop()+ $(window).height()); //윈도우는 딱 보이는 화면의 크기
									var documentHeight = parseInt($(document).height()); //도큐먼트는 보이지 않는 곳도 포함한 크기(도큐먼트가 윈도우보다 더 사이즈가 큼) 
								//if (scrollHeight >= documentHeight) { 
								//	for (test = 0; test < max; test+=10) {
										//alert("test:"+test);
										for (test1 = 0; test1 < max1; test1++) {
										//alert("test1+test :"+(test1+test));
												$.ajax({
														type : 'GET',
														url : 'block/getJsonBlock/'
															+test1,
														dataType : "json",
														data : "",
														async : false,
														success : function(data) {
															console.log("JSONData : "+ JSON.stringify(data)); //stringify은 string type으로 바꿔줌
															//데이터 블럭값이있을경우에만
															if (data['block'] != null) {
																//alert();
																//for (test1 = 0; test1 < max1; test1++) {
																	addBlock(data['block'].bCode,data['block'].title,data['block'].note,data['block'].time);
																	//addBlock(data['block'].bcode, data['block'].btitle, data['block'].note, data['block'].time);
																var dynamicEl = "<div class='people'><li><a href=#><img src='images/3.png' /></a><h2>"
																		+ data['block'].title
																		+ "</h2> <span class='info'><nm>이산돌</nm> <em>"
																		+ data['block'].regDate
																		+ "</em><hr><div class='comments'>#주말이다 #신난다 #일주일남앗네 #슬프다#코멘트divcss가 뭔가 이상하다!!!</div></span><ul class='toolbar'><ui><p class='likes'><span class='glyphicon glyphicon-heart'></span><span class='nLikes'></span></p></ui><ui><p class='download'><span class='glyphicon glyphicon-download-alt'></span><span class='nDown'></span></p></ui><ui><p class='player'><span class='glyphicon glyphicon-play'></span><span class='glyphicon glyphicon-pause'></span><span class='nPlayers'></span></p></ui><ui><p class='stop'><span class='glyphicon glyphicon-stop'></span></p></ui></ul></li></div>";

																var leftHeight = parseInt($("#contain-layer-left").css("height"));
																var rightHeight = parseInt($("#contain-layer-right").css("height"));
																if (leftHeight <= rightHeight) {
																	$("#contain-layer-left").append(dynamicEl);
																} else {
																	$("#contain-layer-right").append(dynamicEl);
																}//end fo else문

																//});//end of scroll
																//}//end of for문 test1
															}//end of datablock문
														},//end of success문
														error : function(status) {
															console.log(status);
														}//end of error문
													})//end of ajax문
												//}//end of for문 test1
										}//end of for문 test
									//}//end of if문
									/* else{
										return;
									} */

							//	});//scorll func문

			}//end of recvFun문
			//좋아요 클릭시 카운트 증가
			function increaseLikes() {
				var myString = $(this).children('.nLikes').first().html();
				var myInteger = parseInt(myString);
				var myNewInteger = myInteger + 1;
				var nlikesUp = myNewInteger.toString();

				$(this).children('.nLikes').first().html(nlikesUp);
			}
			$('.likes').click(increaseLikes);

			
			function increaseDownLoad() {
				var DownLoadString = $(this).children('.nDown').first().html();
				var DownLoadInteger = parseInt(DownLoadString);
				var DownLoadNewInteger = DownLoadInteger + 1;
				var nDownloads = DownLoadNewInteger.toString();

				$(this).children('.nDown').first().html(nDownloads);
			}

			$('.download').click(increaseDownLoad);
			//<a href="javascript:fncValidate();" id="save">Save</a>
			
			$('.glyphicon-pause').hide();

			function increasePlayers(index) {
				var playersString = $('.nPlayers:eq(' + index + ')').html();
				var playersInteger = parseInt(playersString);
				var playersNewInteger = playersInteger + 1;
				var nPlayersUp = playersNewInteger.toString();
				$('.nPlayers:eq(' + index + ')').html(nPlayersUp);
			}

			$('.glyphicon-play').click(function() {
				var index = $('.glyphicon-play').index(this);
				increasePlayers(index);
				$('.glyphicon-play:eq(' + index + ')').hide();
				$('.glyphicon-pause:eq(' + index + ')').show();

			});
>>>>>>> .r609

	<!-- user defined JS -->
	
<!-- 	<script src="javascript/common/initializeIndexedDB.js"></script>
    <script src="javascript/community/iDBBlock.js"></script>
    <script src="javascript/community/iDBMusic.js"></script> -->
    <script src="javascript/community/soundMgr.js"></script>
	<script src="javascript/community/soundBlock.js"></script>
	<script src="javascript/community/soundMusic.js"></script>
</body>

</html>